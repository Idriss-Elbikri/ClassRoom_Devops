trigger:
  branches:
    include:
      - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  artifactName: 'drop'
  warFileName: 'ClassRoom.war'

steps:
# Ã‰tape 1 : Build du projet avec Maven
- task: Maven@3
  displayName: 'ðŸ”§ Build avec Maven'
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'clean package'
    options: '-DskipTests=true'

# Ã‰tape 2 : Copier le fichier .war
- task: CopyFiles@2
  displayName: 'ðŸ“¦ Copier le .war'
  inputs:
    contents: '**/target/*.war'
    targetFolder: '$(Build.ArtifactStagingDirectory)'

# Ã‰tape 3 : Publier comme artefact
- task: PublishBuildArtifacts@1
  displayName: 'ðŸ“¤ Publier Artefact'
  inputs:
    pathToPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: '$(artifactName)'
